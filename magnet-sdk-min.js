/*!*
 * @fileoverview Magnet Javascript SDK
 * {@link https://factory.magnet.com/docs/javascript-sdk/ Magnet Javascript SDK}
 *
 * @version 2.2.1
 */
!function(a){function b(a){return-1!=a.indexOf("[]")?a.replace("[]",""):a}function c(a){for(var b="BOUNDARY",c=d(a,b),g=e(c[0]),h=1;h<c.length;++h)f(g,c[h]);return g}function d(a,b){var c=a.split("--"+b);return c.shift(),c.pop(),c}function e(b){for(var c,d=b,e=b.split("\r\n"),f=0;f<e.length;++f)if(-1!=e[f].indexOf("Content-Type")){c=e[f].replace(/Content-Type[ ]*:/,"").replace(/^\s+|\s+$/g,""),d=d.replace(e[f],"");break}return"application/json"==c?a.Utils.getValidJSON(d):d}function f(b,c){var d,e,f={};f.val=c;for(var h=c.split("\r\n"),i=0;i<h.length;++i)if(-1!=h[i].indexOf("Content-Type")&&(f.mimeType=h[i].replace(/Content-Type[ ]*:/,"").replace(/^\s+|\s+$/g,""),f.val=f.val.replace(h[i],"")),-1!=h[i].indexOf("Content-Transfer-Encoding")&&(d=h[i].replace(/Content-Transfer-Encoding[ ]*:/,"").replace(/^\s+|\s+$/g,""),f.val=f.val.replace(h[i],"")),-1!=h[i].indexOf("Content-Id")){e=h[i].replace(/Content-Id[ ]*:/,"").replace(/^\s+|\s+$/g,""),f.val=f.val.replace(h[i],"");break}f.val="base64"==d?a.Utils.base64ToString(f.val.replace(/(\r\n|\n|\r)/gm,"")):"application/json"==f.mimeType?a.Utils.getValidJSON(f.val):a.Utils.isNode||"application/xml"!=f.mimeType&&"text/xml"!=f.mimeType?f.val.replace(/^\s+|\s+$/g,""):a.Utils.getValidXML(f.val),g(b,e,f)}function g(b,c,d){for(var e in b)a.Utils.isObject(b[e])||a.Utils.isArray(b[e])?g(b[e],c,d):b[e]==c&&(b[e]=d)}function h(b,c,d){for(var e in b)b.hasOwnProperty(e)&&b[e]&&(b[e].isMagnetModel&&b[e].attributes?(h(b[e].attributes,c,b[e]),b[e]=b[e].attributes):a.Utils.isArray(b[e])?h(b[e],c):c&&"undefined"!=typeof d&&d.schema[e]&&("_data"==d.schema[e].type||"binary"==d.schema[e].type)&&(b[e]=c.add(b[e].mimeType,b[e].val)));return b}a.Config={endpointUrl:"",logging:!0,locationDataCollection:!1,storeCredentials:!1,debugMode:!1},String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),a.Utils={isAndroid:"undefined"!=typeof navigator&&navigator.userAgent?/Android|webOS/i.test(navigator.userAgent):!1,isIOS:"undefined"!=typeof navigator&&navigator.userAgent?/iPhone|iPad|iPod/i.test(navigator.userAgent):!1,isMobile:"undefined"!=typeof navigator&&navigator.userAgent?/Android|webOS|iPhone|iPad|iPod/i.test(navigator.userAgent):!1,isNode:"undefined"!=typeof module&&module.exports&&"undefined"==typeof window,isCordova:"undefined"!=typeof navigator&&navigator.userAgent&&"undefined"!=typeof window&&window.location&&window.location.href&&("undefined"!=typeof cordova||"undefined"!=typeof PhoneGap||"undefined"!=typeof phonegap)&&/^file:\/{3}[^\/]/i.test(window.location.href)&&/ios|iphone|ipod|ipad|android/i.test(navigator.userAgent),mergeObj:function(a,b){var a=a||{},b=b||{};for(var c in b)try{a[c]=b[c].constructor==Object?this.mergeObj(a[c],b[c]):b[c]}catch(d){a[c]=b[c]}return a},isObject:function(a){return"[object Object]"==Object.prototype.toString.call(a)},isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},getValidJSON:function(a){try{a=JSON.parse(a)}catch(b){return!1}return a},getValidXML:function(a){this.parseXml||(window.DOMParser?this.parseXml=function(a){return(new window.DOMParser).parseFromString(a,"text/xml")}:"undefined"!=typeof window.ActiveXObject&&new window.ActiveXObject("Microsoft.XMLDOM")&&(this.parseXml=function(a){var b=new window.ActiveXObject("Microsoft.XMLDOM");return b.async="false",b.loadXML(a),b}));try{a=this.parseXml(a)}catch(b){return!1}return a},objectToFormdata:{stringify:function(b){if(a.Utils.isObject(b)){var c=[];for(var d in b)b.hasOwnProperty(d)&&null!=b[d]&&c.push(d+"="+encodeURIComponent(b[d]));return c.join("&")}return""}},getAttributes:function(a){var b=[];a=a||{};for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b},isEmptyObject:function(a){if(!a||"string"==typeof a||"boolean"==typeof a||this.isNumeric(a))return!0;if(a.hasOwnProperty){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}for(var b in a)return!1;return!0},convertHeaderStrToObj:function(a){var b={};if(Object.keys(a).forEach)Object.keys(a).forEach(function(c){"string"!=typeof a[c]&&"number"!=typeof a[c]&&"boolean"!=typeof a[c]||"responseText"==c||(b[c]=a[c])});else for(var c in a)"string"!=typeof a[c]&&"number"!=typeof a[c]&&"boolean"!=typeof a[c]||"responseText"==c||(b[c]=a[c]);var d=a.getAllResponseHeaders().split("\n");for(var e in d){var c=d[e].trim().split(": ");c.length>1&&(b[c[0]]=c[1])}return b},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},cleanData:function(a,b){var c={};for(var d in a)a.hasOwnProperty(d)&&b[d]&&(c[d]=b[d]);return c},validate:function(b,c,d){var e,f=[];c=c||{};for(var g in b)if(b.hasOwnProperty(g)){e={attribute:g};var h=b[g].type;b[g].optional!==!1||""!=c[g]&&c[g]?!c[g]||"integer"!=h&&"int"!=h&&"long"!=h&&"float"!=h||a.Utils.isNumeric(c[g])?c[g]&&"boolean"==h&&"true"!==c[g]&&c[g]!==!0&&"false"!==c[g]&&c[g]!==!1?e.reason="not boolean":!c[g]||"java.util.List"!=h&&"array"!=h||c[g]&&0!=c[g].length&&this.isArray(c[g])!==!1?!c[g]||"_data"!=h&&"binary"!=h||c[g].mimeType&&c[g].val||(e.reason="invalid binary format"):e.reason="empty list":e.reason="not numeric":d||(e.reason="required field blank"),e.reason&&f.push(e)}return 0==f.length?!1:f},hasFeature:function(a){try{return a in window&&null!==window[a]}catch(b){return!1}},isPrimitiveType:function(a){return-1!="|byte|short|int|long|float|double|boolean|char|string|integer|void|array|[]|java.lang.String|java.util.List|".indexOf("|"+a+"|")},isModelOrCollection:function(a){return this.isPrimitiveType(a)===!1&&-1!="|object|date|binary|_data|".indexOf("|"+a+"|")==!1},dateToISO8601:function(a){return Date.prototype.toISOString||!function(){function a(a){return(10>a?"0":"")+a}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"."+(this.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}}(),a.toISOString()},ISO8601ToDate:function(b){var c=/(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d):(\d\d)(\.\d+)?(Z|([+-])(\d\d):(\d\d))/,d=[];if(d=b.match(c),!d)return a.Log("Couldn't parse ISO 8601 date string '"+b+"'"),b;var e=[1,2,3,4,5,6,10,11];for(var f in e)d[e[f]]=parseInt(d[e[f]],10);d[7]=parseFloat(d[7]);var g=Date.UTC(d[1],d[2]-1,d[3],d[4],d[5],d[6]);if(d[7]>0&&(g+=Math.round(1e3*d[7])),"Z"!=d[8]&&d[10]){var h=60*d[10]*60*1e3;d[11]&&(h+=60*d[11]*1e3),"-"==d[9]?g-=h:g+=h}return new Date(g)},stringToBase64:function(a){return this.isNode===!0?new Buffer(a).toString("base64"):window.btoa(unescape(encodeURIComponent(a)))},base64ToString:function(a){return this.isNode===!0?new Buffer(a,"base64").toString("utf8"):decodeURIComponent(escape(window.atob(a)))},getGUID:function(){var a=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var c=(a+16*Math.random())%16|0;return a=Math.floor(a/16),("x"==b?c:7&c|8).toString(16)})}},a.Promise=function(){this.successes=[],this.failures=[]},a.Promise.prototype={successes:null,failures:null,status:"pending",args:null,_isPromise:!0,then:function(b,c){var d=new a.Deferred;return b&&this.successes.push({fn:b,defer:d}),c&&this.failures.push({fn:c,defer:d}),"resolved"===this.status?this.exec({fn:b,defer:d},this.args):"rejected"===this.status&&this.exec({fn:c,defer:d},this.args),d.promise},success:function(b){var c=new a.Deferred;return b&&this.successes.push({fn:b,defer:c}),"resolved"===this.status&&this.exec({fn:b,defer:c},this.args),this},error:function(b){var c=new a.Deferred;return b&&this.failures.push({fn:b,defer:c}),"rejected"===this.status&&this.exec({fn:b,defer:c},this.args),this},exec:function(b,c){setTimeout(function(){var d=b.fn.apply(null,c);a.Utils.isObject(d)&&d._isPromise&&b.defer.bind(d)},0)}},a.Deferred=function(){this.promise=new a.Promise},a.Deferred.prototype={promise:null,resolve:function(){var a=this.promise;a.args=arguments,a.status="resolved";for(var b=0;b<a.successes.length;++b)a.exec(a.successes[b],a.args)},reject:function(){var a=this.promise;a.args=arguments,a.status="rejected";for(var b=0;b<a.failures.length;++b)a.exec(a.failures[b],a.args)},bind:function(a){var b=this;a.then(function(){b.resolve.apply(b,arguments)},function(){b.reject.apply(b,arguments)})}},a.Deferred.all=function(){for(var b=new a.Deferred,c=[],d=[],e=0,f=arguments.length,g=0;f>g;++g)arguments[g].call(null).then(function(){c.push(arguments),++e==f&&b.resolve(c,d)},function(){d.push(arguments),++e==f&&b.resolve(c,d)});return b.promise},a.Events={create:function(a){return a._events||a.invoke||a.on||a.unbind?!1:(a._events={},a.on=function(b,c){a._events[b]=a._events[b]||[],a._events[b].push(c)},a.invoke=function(b){if(typeof b==typeof[]){for(var c=b.length;c--;)if(a._events[b[c]])for(var d=a._events[b[c]].length;d--;)a._events[b[c]][d].apply(this,[].slice.call(arguments,1))}else if(a._events[b])for(var e=a._events[b].length;e--;)a._events[b][e].apply(this,[].slice.call(arguments,1))},a.unbind=function(b){a._events[b]&&delete a._events[b]},!0)}},a.Storage={memory:{},set:function(b,c,d){return d&&a.Utils.hasFeature("localStorage")===!0?setTimeout(function(){window.localStorage.setItem(b,JSON.stringify(c))},1):a.Utils.hasFeature("localStorage")===!1?this.memory[b]=c:window.localStorage.setItem(b,JSON.stringify(c)),c},get:function(b){return a.Utils.hasFeature("localStorage")===!1?this.memory[b]:a.Utils.getValidJSON(window.localStorage.getItem(b))},remove:function(b,c){c&&a.Utils.hasFeature("localStorage")===!0?setTimeout(function(){window.localStorage.removeItem(b)},1):a.Utils.hasFeature("localStorage")===!1?this.memory[b]?delete this.memory[b]:"":window.localStorage.removeItem(b)},getOrCreate:function(b,c){return a.Utils.hasFeature("localStorage")===!1?this.memory[b]||(this.memory[b]=c):a.Utils.getValidJSON(window.localStorage.getItem(b))||this.set(b,c)}},a.Log=function(){a.Config.logging===!0&&console.log("[MAGNET DEBUG] ",a.Utils.isAndroid||a.Utils.isIOS?JSON.stringify(arguments)||arguments:arguments)},a.set=function(b){for(var c in b)if(b.hasOwnProperty(c)){if("endpointUrl"==c&&/^(ftp|http|https):/.test(b[c]===!1))throw"invalid endpointUrl - no protocol";a.Config[c]=b[c],"locationDataCollection"==c&&b[c]===!0&&a.Geolocation.start(),"locationDataCollection"==c&&b[c]===!1&&a.Geolocation.stop()}return this},a.reset=function(){return a.set({endpointUrl:"",logging:!0,locationDataCollection:!1}),this},a.define=function(b){var c=require(b),d=c.Controllers?"Controllers":"Models";return a.Utils.mergeObj(a[d],c[d]),this},a.Geolocation={current:void 0,state:"",message:"",poll:null,options:{maximumAge:3e3,timeout:5e3,enableHighAccuracy:!0,interval:300},refresh:function(b,c){var d=this;a.Config.locationDataCollection===!0&&a.Utils.isObject(navigator)&&navigator.geolocation&&navigator.geolocation.getCurrentPosition?navigator.geolocation.getCurrentPosition(function(a){d.current=a,d.state="OK",d.message="",typeof b==typeof Function&&b()},function(a){d.state=a.code,d.message=a.message,typeof c==typeof Function&&c()},d.options):(a.Log("Geolocation APIs are not available."),d.state="ERROR",d.message="MagnetJS.Config.locationDataCollection not enabled or Geolocation feature is not available in your app.")},getCurrent:function(){return"OK"==this.state?"geo:"+this.current.coords.latitude+","+this.current.coords.longitude+","+(this.current.coords.altitude?this.current.coords.altitude:0)+",crs=wgs84,u="+(this.current.coords.accuracy?Math.round(this.current.coords.accuracy):0):!1},start:function(){var b=this;b.stop(),a.Utils.isObject(navigator)&&navigator.geolocation&&navigator.geolocation.getCurrentPosition?b.poll=setInterval(function(){b.refresh()},1e3*b.options.interval):a.Log("Geolocation APIs are not available.")},stop:function(){clearInterval(this.poll)},isWithinBoundaries:function(a,b){function c(a,b,c){var d=a.lng,e=a.lat,f=b.lng,g=b.lat,h=c.lng,i=c.lat;if(g>i&&(f=c.lng,g=c.lat,h=b.lng,i=b.lat),0>d&&(d+=360),0>f&&(f+=360),0>h&&(h+=360),(e==g||e==i)&&(e+=1e-8),e>i||g>e||d>Math.max(f,h))return!1;if(d<Math.min(f,h))return!0;var j=f!=h?(i-g)/(h-f):1/0,k=f!=d?(e-g)/(d-f):1/0;return k>=j}var d=0;if("undefined"==typeof a||!a.points)throw"The Geostore object provided is invalid";if("undefined"==typeof b)throw"The Geoentry object provided is invalid";for(var e=a.points,f=0;f<e.length;f++){var g=e[f],h=f+1;h>=e.length&&(h=0);var i=e[h];c(b,g,i)&&d++}return d%2==1}},a.Transport={request:function(b,c,d,e,f){if(d=d||{},c._path=c._path||c.path,a.Config.endpointUrl=a.Config.endpointUrl.toLowerCase(),c._path=c.local===!0||/^(ftp|http|https):/.test(c._path)===!0?c._path:a.Config.endpointUrl+c._path,a.Utils.isNode)this.initNodeRequest(b,c,e,f);else if(a.Utils.isCordova&&d.callOptions&&d.callOptions.saveAs&&!d.callOptions.returnRaw)this.cordovaFileTransfer(b,c,d,e,f);else if("undefined"!=typeof jQuery)this.requestJQuery(b,c,e,f);else{if("undefined"===XMLHttpRequest)throw"request-transport-unavailable";this.requestXHR(b,c,e,f)}},requestJQuery:function(b,c,d,e){var f=a.Utils.isEmptyObject(b)||"application/json"!=c.contentType&&"text/uri-list"!=c.contentType?b:JSON.stringify(b);$.support.cors=!0;var g={body:b,info:{url:c._path}};$.ajax({type:c.method,url:c._path,timeout:3e4,dataType:c.dataType,contentType:c.contentType,data:f,beforeSend:function(a){if(c.headers)for(var b=c.headers.length;b--;)a.setRequestHeader(c.headers[b].name,c.headers[b].val)},success:function(b,c,e){typeof d==typeof Function&&(g.info.xhr=a.Utils.convertHeaderStrToObj(e),g.status=e.status,d(b,g))},error:function(b,c){g.info.xhr=a.Utils.convertHeaderStrToObj(b),g.status=b.status,"parsererror"==c?d(b.responseText,g):typeof e==typeof Function&&e(b.responseText,g)}})},requestXHR:function(b,c,d,e){var f,g=this,h=g.parseBody(c.contentType,b),i={body:b,info:{url:c._path}},j=new XMLHttpRequest;if(j.timeout=3e4,j.onreadystatechange=function(){if(4==j.readyState){if(i.status=j.status,i.info.xhr=a.Utils.convertHeaderStrToObj(j),f=j.responseText,"undefined"!=typeof j.responseXML&&null!=j.responseXML)f=j.responseXML;else try{f=JSON.parse(f)}catch(b){}g.isSuccess(j.status)?typeof d==typeof Function&&d(f,i):typeof e==typeof Function&&e(f,i)}},j.ontimeout=function(){i.status=0,i.info.xhr=a.Utils.convertHeaderStrToObj(j),typeof e==typeof Function&&e("request-timeout",i)},j.open(c.method,c._path,!0),c.contentType&&j.setRequestHeader("Content-Type",c.contentType),j.setRequestHeader("Accept",g.createAcceptHeader(c.dataType)),c.headers)for(var k=c.headers.length;k--;)j.setRequestHeader(c.headers[k].name,c.headers[k].val);j.send(h)},initNodeRequest:function(b,c,d,e){var f=require("url"),g=f.parse(c._path),h=a.Utils.mergeObj({"Content-Type":c.contentType},a.Transport.Headers);if(c.headers)for(var i=c.headers.length;i--;)h[c.headers[i].name]=c.headers[i].val;c.protocol=g.protocol,g.hostname?this.requestNode(b,c,{host:g.hostname,port:parseInt(g.port||("https:"==g.protocol?443:null)),path:g.path,method:c.method,rejectUnauthorized:!1,requestCert:!1,headers:h},d,e):typeof e==typeof Function&&e("error parsing url",{body:b,info:{url:c._path}})},requestNode:function(a,b,c,d,e){var f=this,g=require("http"),h=require("https"),i=f.parseBody(b.contentType,a),j=("https:"==b.protocol?h:g).request(c,function(c){var g="",h={body:a,info:{metadata:b,url:b._path,request:j,response:c},status:c.statusCode};c.setEncoding("_data"==b.returnType?"binary":"utf8"),c.on("data",function(a){g+=a}),c.on("end",function(){var a=g;try{a=JSON.parse(g)}catch(b){}f.isSuccess(c.statusCode)?typeof d==typeof Function&&d(a,h):typeof e==typeof Function&&e(a,h)})});j.on("error",function(c){if(typeof e==typeof Function){var d={body:a,info:{metadata:b,url:b._path,request:j},status:0};e(c,d)}}),a&&j.write(i,"utf8"),j.end()},isSuccess:function(a){return a>=200&&207>=a},parseBody:function(b,c){var d,e=a.Utils.isNode?require("querystring"):a.Utils.objectToFormdata;switch(b){case"application/x-www-form-urlencoded":d=e.stringify(c);break;case"application/json":d=JSON.stringify(c);break;default:d=c}return d},createAcceptHeader:function(a){var b="";switch(a=a||"json"){case"xml":b="application/xml;q=1.0";break;case"html":b="text/plain;q=1.0";break;case"text":b="text/plain;q=1.0";break;default:b="application/json;q=1.0"}return b+",*/*;q=0.5"},cordovaFileTransfer:function(b,c,d,e,f){var g={body:b,info:{url:c._path},status:null},h={};if(c.headers)for(var i=c.headers.length;i--;)h[c.headers[i].name]=c.headers[i].val;a.FileManager.getFS(function(){var b=new FileTransfer;b.download(c._path,a.FileManager.filePath+d.callOptions.saveAs,function(a){typeof e==typeof Function&&e(a,g)},function(a){typeof f==typeof Function&&f(a,g)},a.Config.debugMode,{headers:h})},function(){typeof f==typeof Function&&f(a.FileManager.status,g)})}},a.Transport.Headers={},a.Request=function(a,b,c){this.instance=a,this.options=b,this.metadata=c},a.Request.prototype.send=function(b,c){var d=this;d.beforeRequest(b,c,function(){var e=d.setup(d.metadata.schema||{},d.metadata.params,d.options.attributes);e.params.headers=e.params.headers||[];var f=a.Geolocation.getCurrent();"OK"==a.Geolocation.state&&f&&e.params.headers.push({name:"Geolocation",val:f}),a.Utils.isCordova&&typeof device==typeof{}&&device.uuid&&e.params.headers.push({name:"X-Magnet-Device-Id",val:device.uuid}),a.Utils.isCordova&&e.params.headers.push({name:"X-Magnet-Auth-Challenge",val:"disabled"}),d.options&&d.options.callOptions&&d.options.callOptions.correlationId&&(e.params.headers.push({name:"X-Magnet-Correlation-id",val:d.options.callOptions.correlationId}),e.params.headers.push({name:"X-Magnet-Result-Timeout",val:d.options.callOptions.serverTimeout||0})),e.params.multipartResponse&&e.params.headers.push({name:"Accept",val:"multipart/related"}),a.Transport.request(e.body,e.params,d.options,function(a,e){"MMSDKLoginService"==d.metadata.params.controller&&"login"==d.metadata.params.name&&"SUCCESS"!=a?d.onResponseError(b,c,a,e):d.onResponseSuccess(b,a,e)},function(a,e){d.onResponseError(b,c,a,e)})})},a.Request.prototype.setup=function(b,c,d){var e="",f={},g={},i={};c.contentType=c.contentType||"application/json",c.dataType=c.dataType||"json",c._path=c.path;var j=c.multipartRequest?new a.Multipart:void 0,k=h(d,j);for(var l in k)if(k.hasOwnProperty(l))switch(b[l].style){case"TEMPLATE":c._path=c._path.replace("{"+l+"}",k[l].replace("magnet://",""));break;case"QUERY":e+="&"+l+"="+k[l];break;case"PLAIN":g[l]=k[l];break;case"FORM":i[l]=k[l],c.contentType="application/x-www-form-urlencoded"}var m=a.Utils.getAttributes(g);return a.Utils.isEmptyObject(i)&&1==m.length?(f=g[m[0]],a.Utils.isPrimitiveType(b[m[0]].type)&&(c.contentType="text/html")):f=a.Utils.mergeObj(g,i),"undefined"!=typeof j&&(c.contentType="multipart/related",f=j.close(f)),c._path=(c.basePathOnly===!0?c._path:"/rest"+c._path)+e,c._path=-1==c._path.indexOf("?")?c._path.replace("&","?"):c._path,{body:f,params:c}},a.Request.prototype.beforeRequest=function(b,c,d){var e=this,f=a.CallManager.getCache(this.getCallId());if(f)typeof b==typeof Function&&b(f.result,f.details,!0);else{var g=this.options.callOptions;g&&a.CallManager.isConstraintMet(g.constraint)===!1?g.isReliable===!0&&a.CallManager.isExpired(g.requestAge)===!1?(a.CallManager.setRequestObject(e.getCallId(),e.options,e.metadata),typeof b==typeof Function&&b("awaiting-constraint")):typeof c==typeof Function&&c("constraint-failure",{constraint:g.constraint,current:a.CallManager.getConnectionState()}):a.Utils.isCordova&&"NONE"==a.CallManager.getConnectionState()?typeof c==typeof Function&&c("no-network-connectivity"):d()}},a.Request.prototype.onResponseSuccess=function(b,c,d){var e=this;e.options.callOptions&&0!=e.options.callOptions.cacheAge&&a.CallManager.setCacheObject(e.getCallId(),e.options.callOptions,c,d),e.formatResponse(c,function(a){e.instance&&e.instance.invoke(["Complete","Success","MMSDKComplete"],e.metadata.params.name,a,d),typeof b==typeof Function&&b(a,d)})},a.Request.prototype.onResponseError=function(b,c,d,e){if(403==e.status&&a.Utils.isCordova===!0&&"string"==typeof d&&-1!=d.indexOf("com.magnet.security.api.oauth.OAuthLoginException")){var f=a.Utils.getValidJSON(d);a.OAuthHandler.invoke("OAuthLoginException",this.instance,this.options,this.metadata,f,b,c)}else(401==e.status||403==e.status)&&(d="session-expired",a.LoginService.connectionStatus="Unauthorized",a.LoginService.invoke(["Unauthorized"],this.metadata.params.name,d,e)),this.instance&&this.instance.invoke(["Complete","Error","MMSDKComplete"],this.metadata.params.name,d,e),typeof c==typeof Function&&c(d,e)},a.Request.prototype.getCallId=function(){return a.CallManager.getCallId(this.metadata.params.controller,this.metadata.params.name,JSON.stringify(this.options.attributes)||"")},a.Request.prototype.formatResponse=function(b,d){var e=this.metadata.params,f=this.options.callOptions||{},g=b;f.returnRaw?d(g):"date"==e.returnType?d(a.Utils.ISO8601ToDate(b)):f.saveAs&&a.Utils.isCordova===!1?a.Utils.isNode?require("fs").writeFile(f.saveAs,"string"==typeof b?b:JSON.stringify(b),a.Utils.mergeObj({encoding:"binary",mode:438,flag:"w"},f.saveAsOptions),function(b){b&&a.Log(b),d(g)}):(a.Log("The saveAs option is only compatible with Phonegap or Node.js applications."),d(g)):a.Utils.isModelOrCollection(e.returnType)===!0?d(this.jsonToModel(e.returnType,b)):"string"==typeof b&&-1!=b.indexOf("--BOUNDARY--")?d(c(b)):d(g)},a.Request.prototype.jsonToModel=function(d,e,f){var g=b(d);if(a.Models[g]&&-1!=d.indexOf("[]")&&e.page&&a.Utils.isArray(e.page))e=new a.Collection(g,e.page);else if(a.Models[g]&&a.Utils.isArray(e))for(var h=0;h<e.length;++h)e[h]=this.jsonToModel(g,e[h]);else if(a.Models[g]&&a.Utils.isObject(e)&&e["magnet-type"]){e=new a.Models[g](e);for(var i in e.attributes)e.schema[i]&&e.schema[i].type&&a.Utils.isModelOrCollection(e.schema[i].type)&&(e.attributes[i]=this.jsonToModel(b(e.schema[i].type),e.attributes[i]))}else if(!f&&"string"==typeof e&&-1!=e.indexOf("--BOUNDARY--")){var j=c(e);e=a.Utils.isObject(j)?this.jsonToModel(g,j):j}return e},a.Multipart=function(){this.boundary="BOUNDARY",this.message="",this.prefix="DATA_",this.index=0},a.Multipart.prototype.add=function(b,c){var d=this.prefix+String(++this.index);return this.message+="--"+this.boundary+"\r\n",this.message+="Content-Type: "+b+"\r\n",this.message+="Content-Transfer-Encoding: base64\r\n",this.message+="Content-Id: "+d+"\r\n\r\n",this.message+=a.Utils.stringToBase64(c)+"\r\n\r\n",d},a.Multipart.prototype.close=function(a){return this.message+="--"+this.boundary+"--",this.message="--"+this.boundary+"\r\nContent-Type: application/json\r\n\r\n"+JSON.stringify(a)+"\r\n\r\n"+this.message,this.message},a.Model=function(b,c){a.Events.create(this),this.attributes=this.attributes||{};for(var d in this.attributes)null===this.attributes[d]&&delete this.attributes[d];return this.attributes["magnet-type"]=this.entityType,b&&this.set(b,c),this.isMagnetModel=!0,this},a.Model.prototype.validate=function(b,c){return a.Utils.validate(this.schema,b,c)},a.Model.prototype.set=function(b,c){if(c){var d=this.validate(b);return d===!1?(this.attributes=a.Utils.mergeObj(this.attributes,b),this.invoke("onSet",this.name,b)):a.Log('model "'+this.name+'" validation failure:'+JSON.stringify(d)),d?d:!1}return this.attributes=a.Utils.mergeObj(this.attributes,b),this.invoke("onSet",this.name,b),!1},a.Collection=function(b,c){return this._type=b,this.entityType=a.Models[this._type]?a.Models[this._type].entityType:b,this.models=[],c&&this.add(c),this.isMagnetCollection=!0,this},a.Collection.prototype.add=function(b){if(a.Utils.isArray(b))for(var c=0;c<b.length;++c)b[c].isMagnetModel||(b[c]["magnet-type"]=this.entityType),this.models.push(b[c].isMagnetModel?b[c]:new a.Models[this._type](b[c]));else b.isMagnetModel||(b["magnet-type"]=this.entityType),this.models.push(b.isMagnetModel?b:new a.Models[this._type](b))},a.Collection.prototype.clear=function(){this.models=[]},a.Collection.prototype.where=function(b,c){for(var d=[],e=0;e<this.models.length;++e)if(a.Utils.isObject(b)){var f=!0;for(var g in b)b.hasOwnProperty(g)&&(this.models[e].attributes[g]&&this.models[e].attributes[g]===b[g]||(f=!1));f&&d.push(this.models[e])}else c&&this.models[e].attributes[b]===c&&d.push(this.models[e]);return d},a.Models={},a.Controller=function(b){return this._MMSDKName=b,a.Events.create(this),this},a.Method=function(b,c,d){var e=this;c=c||{},c.attributes="undefined"==typeof b||null===b?void 0:b,c.attributes=a.Utils.mergeObj(c.attributes,d.attributes);var f=a.Utils.validate(d.schema,c.attributes),g=new a.Deferred;if(d.params.controller=e._MMSDKName,c.callOptions&&c.callOptions.skipValidation===!0||f===!1){e.invoke(["Set"],d.params.name,c,d);var h=new a.Request(e,c,d);e.invoke(["BeforeRequest"],d.params.name,c,d),h.send(function(){typeof c.success==typeof Function&&c.success.apply(e,arguments),g.resolve.apply(g,arguments)},function(){typeof c.error==typeof Function&&c.error.apply(e,arguments),g.reject.apply(g,arguments)})}else e.invoke(["Complete","Error"],d.params.name,"failed-validation",f),a.Log('controller method "'+d.params.name+'" validation failure:'+JSON.stringify(f)),typeof c.error==typeof Function&&c.error("failed-validation",f),g.reject("failed-validation",f);return g.promise},a.Controllers={},a.LoginService=new a.Controller("MMSDKLoginService"),a.LoginService.store="MMSDKConnection",a.LoginService.connectionStatus="NoAuthorization",a.LoginService.login=function(b,c){return a.Method.call(this,b,c,{params:{name:"login",path:"/login",method:"POST",dataType:"html",returnType:"string"},attributes:{authority:"magnet"},schema:{name:{style:"FORM",type:"java.lang.String",optional:!1},password:{style:"FORM",type:"java.lang.String",optional:!1},authority:{style:"FORM",type:"java.lang.String",optional:!0}}})},a.LoginService.logout=function(b){return a.Method.call(this,null,b,{params:{name:"logout",path:"/logout",method:"POST",dataType:"html",returnType:"void"}})},a.LoginService.loginWithSavedCredentials=function(b){var c=a.Storage.get(this.store)||{};c.name&&c.password&&c.endpointUrl?(a.set({endpointUrl:c.endpointUrl}),delete c.endpointUrl,this.login(c,{success:b.success,error:b.error})):typeof b.error==typeof Function&&b.error("invalid-credentials")},a.LoginService.on("MMSDKComplete",function(b,c,d){"login"==b&&"SUCCESS"==c?(a.LoginService.connectionStatus="Authorized",a.LoginService.invoke(["Authorized"],c,d),a.Utils.isMobile&&a.Config.storeCredentials===!0&&a.Storage.set(this.store,a.Utils.mergeObj({endpointUrl:a.Config.endpointUrl},d.body)),a.Utils.isNode&&d.info.response.headers["set-cookie"]&&(a.Transport.Headers.Cookie=d.info.response.headers["set-cookie"][0])):"logout"==b&&(a.LoginService.connectionStatus="NoAuthorization",a.LoginService.invoke(["NoAuthorization"],c,d),a.Utils.isMobile&&a.Storage.remove(this.store),a.Utils.isNode&&delete a.Transport.Headers.Cookie,delete a.Transport.credentials)});var i=i||{UNKNOWN:"unknown",ETHERNET:"ethernet",WIFI:"wifi",CELL_2G:"2g",CELL_3G:"3g",CELL_4G:"4g",CELL:"cellular",NONE:"none"};a.OAuthHandler={authorize:function(b){if(!b||!b.endpoint)throw"no endpoint specified";var c=window.open(b.endpoint,"_blank","location=no,toolbar=no");"undefined"!=typeof c?c.addEventListener("loadstop",function(a){var d=/MagnetOAuthServlet\?code=(.+)$/.exec(a.url),e=/\?error=(.+)$/.exec(a.url)||/\?error_code=(.+)$/.exec(a.url)||null;(d||e)&&c.close(),d&&typeof b.success==typeof Function&&b.success(a.url,a),e&&typeof b.error==typeof Function&&b.error(e[1],a)},!0):(a.Log("OAuth handling error: no InAppBrowser. Install the org.apache.cordova.inappbrowser plugin to handle Oauth."),typeof b.error==typeof Function&&b.error("missing-oauth-plugin",b.endpoint))}},a.Events.create(a.OAuthHandler),a.OAuthHandler.on("OAuthLoginException",function(b,c,d,e,f,g){a.OAuthHandler.invoke("OAuthLoginExceptionReceived",b,c,d,e),a.OAuthHandler.authorize({endpoint:e.message,success:function(){a.OAuthHandler.invoke("OAuthFlowComplete",b,c,d);var e=new a.Request(b,c,d);e.send(f,g)},error:function(a,b){typeof g==typeof Function&&g("oauth-flow-error",{error:a,details:b})}})}),a.CallManager={queuesName:"MMSDKReliableQueues",defaultQueueName:"MMSDKReliableDefaultQueue",cache:{}},a.CallManager.queues=a.Storage.getOrCreate(a.CallManager.queuesName,{}),a.CallManager.defaultQueue=a.Storage.getOrCreate(a.CallManager.defaultQueueName,[]),a.CallManager.clearCache=function(a){a&&this.cache[a]?delete this.cache[a]:this.cache={}},a.CallManager.cancelAllPendingCalls=function(b){b&&this.queues[b]?delete this.queues[b]:(this.queues={},this.defaultQueue=[]),a.Storage.set(this.queuesName,this.queues),a.Storage.set(this.defaultQueueName,this.defaultQueue)},a.CallManager.reset=function(){this.cancelAllPendingCalls(),this.clearCache()},a.CallManager.run=function(){var b=this;a.Deferred.all(function(){var c=new a.Deferred;return b.runQueue("defaultQueue",void 0,function(){c.resolve()}),c.promise},function(){var c=new a.Deferred,d=0;for(var e in b.queues)b.queues.hasOwnProperty(e)&&(++d,b.runQueue("queues",e,function(){0==--d&&c.resolve()}));return 0==d&&c.resolve(),c.promise}).then(function(){a.Storage.set(b.queuesName,b.queues),a.Storage.set(b.defaultQueueName,b.defaultQueue)})},a.CallManager.runQueue=function(b,c,d){var e=this,f=c?this[b][c]:this[b];if(a.Utils.isArray(f)&&f.length>0)if(e.isExpired(f[0].callOptions.requestAge)===!0)f.shift(),e.runQueue(b,c,d);else if(e.isConstraintMet(f[0].callOptions.constraint)){var g=new a.Request(void 0,f[0].options,f[0].metadata);g.send(function(g,h){a.ReliableCallListener.invoke(["onSuccess",f[0].callOptions.success],f[0].metadata.params,g,h),f.shift(),e.runQueue(b,c,d)},function(g,h){a.ReliableCallListener.invoke(["onError",f[0].callOptions.error],f[0].metadata.params,g,h),f.shift(),e.runQueue(b,c,d)})}else c?this[b][c]=f:this[b]=f,d();else c?delete e[b][c]:e[b]=[],d()},a.CallManager.setRequestObject=function(b,c,d){var e=c.callOptions.queueName&&""!=c.callOptions.queueName?c.callOptions.queueName:!1,f=e?this.queues[e]:this.defaultQueue;f=f||[],f.push({callId:b,callOptions:c.callOptions,options:c,metadata:d}),delete f[f.length-1].options.callOptions,e?(this.queues[e]=f,a.Storage.set(this.queuesName,this.queues)):(this.defaultQueue=f,a.Storage.set(this.defaultQueueName,this.defaultQueue))},a.CallManager.setCacheObject=function(a,b,c,d){this.cache[a]={callOptions:b,result:c,details:d||{}}},a.CallManager.getCache=function(a){return this.cache[a]&&this.isExpired(this.cache[a].callOptions.cacheAge)&&(this.cache[a].callOptions.ignoreAgeIfOffline===!1||"NONE"!=this.getConnectionState())&&delete this.cache[a],this.cache[a]},a.CallManager.getCallId=function(){var a=[].slice.call(arguments).join("|");return j?j.MD5(a).toString():encodeURIComponent(a)},a.CallManager.getTimeInSeconds=function(){return Math.round((new Date).getTime()/1e3)},a.CallManager.isExpired=function(a){return this.getTimeInSeconds()>=a},a.CallManager.set=function(a,b){a=a||this;for(var c in b)b.hasOwnProperty(c)&&("cacheTimeout"==c?a.setCacheTimeout(b[c]):"requestTimeout"==c&&a.setRequestTimeout?a.setRequestTimeout(b[c]):a[c]=b[c])},a.CallManager.isConstraintMet=function(b){if(b&&a.Utils.isArray(b)){for(var c,d=!0,e=this.getConnectionState(),f=a.Geolocation.current,g=0;g<b.length;++g)"string"==typeof b[g]&&b[g]==e?c=!0:a.Utils.isObject(b[g])&&("OK"===a.Geolocation.state?a.Geolocation.isWithinBoundaries(b[g],{lat:f.coords.latitude,lng:f.coords.longitude})===!1&&(d=!1):d=!1);return c===!0&&d===!0}return!0},a.CallManager.getConnectionState=function(){var b="WIFI";if(a.Utils.isObject(navigator)&&navigator.connection&&navigator.connection.type){var c=navigator.connection.type;switch(c){case i.ETHERNET:b="WIFI";break;case i.WIFI:b="WIFI";break;case i.CELL:b="CELL";break;case i.CELL_2G:b="CELL";break;case i.CELL_3G:b="CELL";break;case i.CELL_4G:b="CELL";break;case i.NONE:b="NONE";break;default:b=c}}return b},a.ReliableCallListener={on:function(){},unbind:function(){}},a.ReliableCallListener={},a.Events.create(a.ReliableCallListener),a.CallOptions=function(b){this.constraint="",this.token="",this.cacheAge=0,this.ignoreAgeIfOffline=!1,this.skipValidation=!1,b&&a.CallManager.set(this,b)
},a.CallOptions.prototype.setCacheTimeout=function(b,c){this.cacheAge=b?a.CallManager.getTimeInSeconds()+b:0,this.ignoreAgeIfOffline=c},a.AsyncCallOptions=function(){a.CallOptions.apply(this,arguments)},a.AsyncCallOptions.prototype=new a.CallOptions,a.AsyncCallOptions.prototype.constructor=a.AsyncCallOptions,a.ReliableCallOptions=function(){this.queueName,this.serverTimeout=0,this.requestAge=0,this.success,this.error,this.isReliable=!0,this.correlationId=a.Utils.getGUID(),a.CallOptions.apply(this,arguments)},a.ReliableCallOptions.prototype=new a.CallOptions,a.ReliableCallOptions.prototype.constructor=a.ReliableCallOptions,a.ReliableCallOptions.prototype.setRequestTimeout=function(b){this.serverTimeout=1e3*b+3e4,this.requestAge=b?a.CallManager.getTimeInSeconds()+b:0},a.Constraints={Wifi:["WIFI"],Mobile:["CELL","WIFI"],createConstraint:function(a,b){this[a]=b}},a.FileManager={fileSystem:null,filePath:null,status:!1,tempFile:"_magnet_temp.txt",getFS:function(b,c){var d=this;d.fileSystem&&d.filePath?b(d.fileSystem,d.filePath):d.status!==!1&&"OK"!=d.status?c():a.Utils.isCordova&&window.requestFileSystem&&"undefined"!=typeof FileTransfer?window.requestFileSystem(LocalFileSystem.TEMPORARY,0,function(a){d.fileSystem=a,d.fileSystem.root.getFile(d.tempFile,{create:!0,exclusive:!1},function(a){d.filePath=a.fullPath.replace(d.tempFile,""),a.remove(),d.status="OK",b(d.fileSystem,d.filePath)},function(a){d.status=a,c()})},function(a){d.status=a,c()}):(d.status===!1&&a.Log('The "org.apache.cordova.file-transfer" Phonegap plugin has not been added.'),d.status="FAILED",c())},writeFile:function(a,b,c,d){this.fileSystem.root.getFile(a,{create:!0,exclusive:!1},function(a){a.createWriter(function(d){d.onwrite=function(){c(a)},d.write(b)},d)},d)}},a.Geoentry=function(a,b){this.lat=a,this.lng=b},a.Geostore=function(a){this.points=a||[]},a.Geostore.prototype.add=function(b,c){this.points.push(new a.Geoentry(b,c))};/*!
 CryptoJS v3.1.2
 code.google.com/p/crypto-js
 (c) 2009-2013 by Jeff Mott. All rights reserved.
 code.google.com/p/crypto-js/wiki/License
 */
var j=j||function(a,b){var c={},d=c.lib={},e=function(){},f=d.Base={extend:function(a){e.prototype=this;var b=new e;return a&&b.mixIn(a),b.hasOwnProperty("init")||(b.init=function(){b.$super.init.apply(this,arguments)}),b.init.prototype=b,b.$super=this,b},create:function(){var a=this.extend();return a.init.apply(a,arguments),a},init:function(){},mixIn:function(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}},g=d.WordArray=f.extend({init:function(a,c){a=this.words=a||[],this.sigBytes=c!=b?c:4*a.length},toString:function(a){return(a||i).stringify(this)},concat:function(a){var b=this.words,c=a.words,d=this.sigBytes;if(a=a.sigBytes,this.clamp(),d%4)for(var e=0;a>e;e++)b[d+e>>>2]|=(c[e>>>2]>>>24-8*(e%4)&255)<<24-8*((d+e)%4);else if(65535<c.length)for(e=0;a>e;e+=4)b[d+e>>>2]=c[e>>>2];else b.push.apply(b,c);return this.sigBytes+=a,this},clamp:function(){var b=this.words,c=this.sigBytes;b[c>>>2]&=4294967295<<32-8*(c%4),b.length=a.ceil(c/4)},clone:function(){var a=f.clone.call(this);return a.words=this.words.slice(0),a},random:function(b){for(var c=[],d=0;b>d;d+=4)c.push(4294967296*a.random()|0);return new g.init(c,b)}}),h=c.enc={},i=h.Hex={stringify:function(a){var b=a.words;a=a.sigBytes;for(var c=[],d=0;a>d;d++){var e=b[d>>>2]>>>24-8*(d%4)&255;c.push((e>>>4).toString(16)),c.push((15&e).toString(16))}return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;b>d;d+=2)c[d>>>3]|=parseInt(a.substr(d,2),16)<<24-4*(d%8);return new g.init(c,b/2)}},j=h.Latin1={stringify:function(a){var b=a.words;a=a.sigBytes;for(var c=[],d=0;a>d;d++)c.push(String.fromCharCode(b[d>>>2]>>>24-8*(d%4)&255));return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;b>d;d++)c[d>>>2]|=(255&a.charCodeAt(d))<<24-8*(d%4);return new g.init(c,b)}},k=h.Utf8={stringify:function(a){try{return decodeURIComponent(escape(j.stringify(a)))}catch(b){throw Error("Malformed UTF-8 data")}},parse:function(a){return j.parse(unescape(encodeURIComponent(a)))}},l=d.BufferedBlockAlgorithm=f.extend({reset:function(){this._data=new g.init,this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=k.parse(a)),this._data.concat(a),this._nDataBytes+=a.sigBytes},_process:function(b){var c=this._data,d=c.words,e=c.sigBytes,f=this.blockSize,h=e/(4*f),h=b?a.ceil(h):a.max((0|h)-this._minBufferSize,0);if(b=h*f,e=a.min(4*b,e),b){for(var i=0;b>i;i+=f)this._doProcessBlock(d,i);i=d.splice(0,b),c.sigBytes-=e}return new g.init(i,e)},clone:function(){var a=f.clone.call(this);return a._data=this._data.clone(),a},_minBufferSize:0});d.Hasher=l.extend({cfg:f.extend(),init:function(a){this.cfg=this.cfg.extend(a),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(a){return this._append(a),this._process(),this},finalize:function(a){return a&&this._append(a),this._doFinalize()},blockSize:16,_createHelper:function(a){return function(b,c){return new a.init(c).finalize(b)}},_createHmacHelper:function(a){return function(b,c){return new m.HMAC.init(a,c).finalize(b)}}});var m=c.algo={};return c}(Math);!function(a){function b(a,b,c,d,e,f,g){return a=a+(b&c|~b&d)+e+g,(a<<f|a>>>32-f)+b}function c(a,b,c,d,e,f,g){return a=a+(b&d|c&~d)+e+g,(a<<f|a>>>32-f)+b}function d(a,b,c,d,e,f,g){return a=a+(b^c^d)+e+g,(a<<f|a>>>32-f)+b}function e(a,b,c,d,e,f,g){return a=a+(c^(b|~d))+e+g,(a<<f|a>>>32-f)+b}for(var f=j,g=f.lib,h=g.WordArray,i=g.Hasher,g=f.algo,k=[],l=0;64>l;l++)k[l]=4294967296*a.abs(a.sin(l+1))|0;g=g.MD5=i.extend({_doReset:function(){this._hash=new h.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(a,f){for(var g=0;16>g;g++){var h=f+g,i=a[h];a[h]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var g=this._hash.words,h=a[f+0],i=a[f+1],j=a[f+2],l=a[f+3],m=a[f+4],n=a[f+5],o=a[f+6],p=a[f+7],q=a[f+8],r=a[f+9],s=a[f+10],t=a[f+11],u=a[f+12],v=a[f+13],w=a[f+14],x=a[f+15],y=g[0],z=g[1],A=g[2],B=g[3],y=b(y,z,A,B,h,7,k[0]),B=b(B,y,z,A,i,12,k[1]),A=b(A,B,y,z,j,17,k[2]),z=b(z,A,B,y,l,22,k[3]),y=b(y,z,A,B,m,7,k[4]),B=b(B,y,z,A,n,12,k[5]),A=b(A,B,y,z,o,17,k[6]),z=b(z,A,B,y,p,22,k[7]),y=b(y,z,A,B,q,7,k[8]),B=b(B,y,z,A,r,12,k[9]),A=b(A,B,y,z,s,17,k[10]),z=b(z,A,B,y,t,22,k[11]),y=b(y,z,A,B,u,7,k[12]),B=b(B,y,z,A,v,12,k[13]),A=b(A,B,y,z,w,17,k[14]),z=b(z,A,B,y,x,22,k[15]),y=c(y,z,A,B,i,5,k[16]),B=c(B,y,z,A,o,9,k[17]),A=c(A,B,y,z,t,14,k[18]),z=c(z,A,B,y,h,20,k[19]),y=c(y,z,A,B,n,5,k[20]),B=c(B,y,z,A,s,9,k[21]),A=c(A,B,y,z,x,14,k[22]),z=c(z,A,B,y,m,20,k[23]),y=c(y,z,A,B,r,5,k[24]),B=c(B,y,z,A,w,9,k[25]),A=c(A,B,y,z,l,14,k[26]),z=c(z,A,B,y,q,20,k[27]),y=c(y,z,A,B,v,5,k[28]),B=c(B,y,z,A,j,9,k[29]),A=c(A,B,y,z,p,14,k[30]),z=c(z,A,B,y,u,20,k[31]),y=d(y,z,A,B,n,4,k[32]),B=d(B,y,z,A,q,11,k[33]),A=d(A,B,y,z,t,16,k[34]),z=d(z,A,B,y,w,23,k[35]),y=d(y,z,A,B,i,4,k[36]),B=d(B,y,z,A,m,11,k[37]),A=d(A,B,y,z,p,16,k[38]),z=d(z,A,B,y,s,23,k[39]),y=d(y,z,A,B,v,4,k[40]),B=d(B,y,z,A,h,11,k[41]),A=d(A,B,y,z,l,16,k[42]),z=d(z,A,B,y,o,23,k[43]),y=d(y,z,A,B,r,4,k[44]),B=d(B,y,z,A,u,11,k[45]),A=d(A,B,y,z,x,16,k[46]),z=d(z,A,B,y,j,23,k[47]),y=e(y,z,A,B,h,6,k[48]),B=e(B,y,z,A,p,10,k[49]),A=e(A,B,y,z,w,15,k[50]),z=e(z,A,B,y,n,21,k[51]),y=e(y,z,A,B,u,6,k[52]),B=e(B,y,z,A,l,10,k[53]),A=e(A,B,y,z,s,15,k[54]),z=e(z,A,B,y,i,21,k[55]),y=e(y,z,A,B,q,6,k[56]),B=e(B,y,z,A,x,10,k[57]),A=e(A,B,y,z,o,15,k[58]),z=e(z,A,B,y,v,21,k[59]),y=e(y,z,A,B,m,6,k[60]),B=e(B,y,z,A,t,10,k[61]),A=e(A,B,y,z,j,15,k[62]),z=e(z,A,B,y,r,21,k[63]);g[0]=g[0]+y|0,g[1]=g[1]+z|0,g[2]=g[2]+A|0,g[3]=g[3]+B|0},_doFinalize:function(){var b=this._data,c=b.words,d=8*this._nDataBytes,e=8*b.sigBytes;c[e>>>5]|=128<<24-e%32;var f=a.floor(d/4294967296);for(c[(e+64>>>9<<4)+15]=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8),c[(e+64>>>9<<4)+14]=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8),b.sigBytes=4*(c.length+1),this._process(),b=this._hash,c=b.words,d=0;4>d;d++)e=c[d],c[d]=16711935&(e<<8|e>>>24)|4278255360&(e<<24|e>>>8);return b},clone:function(){var a=i.clone.call(this);return a._hash=this._hash.clone(),a}}),f.MD5=i._createHelper(g),f.HmacMD5=i._createHmacHelper(g)}(Math),/*!
 *  window.btoa/window.atob shim
 */
function(){function a(a){this.message=a}var b="undefined"!=typeof exports?exports:this,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a.prototype=Error(),a.prototype.name="InvalidCharacterError",b.btoa||(b.btoa=function(b){for(var d,e,f=0,g=c,h="";b.charAt(0|f)||(g="=",f%1);h+=g.charAt(63&d>>8-8*(f%1))){if(e=b.charCodeAt(f+=.75),e>255)throw new a("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");d=d<<8|e}return h}),b.atob||(b.atob=function(b){if(b=b.replace(/=+$/,""),1==b.length%4)throw new a("'atob' failed: The string to be decoded is not correctly encoded.");for(var d,e,f=0,g=0,h="";e=b.charAt(g++);~e&&(d=f%4?64*d+e:e,f++%4)?h+=String.fromCharCode(255&d>>(6&-2*f)):0)e=c.indexOf(e);return h})}()}("undefined"==typeof exports?this.MagnetJS||(this.MagnetJS={}):exports);